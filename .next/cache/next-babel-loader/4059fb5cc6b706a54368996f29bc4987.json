{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport { initiateCheckout } from '../lib/payments';\nimport products from '../products.json';\nvar defaultCart = {\n  products: {}\n};\nvar cartItems = Object.keys(cart.products).map(function (key) {\n  var product = products.find(function (_ref) {\n    var id = _ref.id;\n    return \"\".concat(id) === \"\".concat(key);\n  });\n  return _objectSpread(_objectSpread({}, cart.products[key]), {}, {\n    pricePerItem: product.price\n  });\n});\nvar subTotal = cartItems.reduce(function (accumulator, _ref2) {\n  var pricePerItem = _ref2.pricePerItem,\n      quantity = _ref2.quantity;\n  return accumulator + pricePerItem * quantity;\n}, 0);\nvar totalItems = cartItems.reduce(function (accumulator, _ref3) {\n  var quantity = _ref3.quantity;\n  return accumulator + quantity;\n}, 0);\n\nfunction addToCart() {\n  var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      id = _ref4.id;\n\n  updateCart(function (prev) {\n    var cart = _objectSpread({}, prev);\n\n    if (cart.products[id]) {\n      cart.products[id].quantity = cart.products[id].quantity + 1;\n    } else {\n      cart.products[id] = {\n        id: id,\n        quantity: 1\n      };\n    }\n\n    return cart;\n  });\n}\n\nfunction checkout() {\n  initiateCheckout({\n    lineItems: cartItems.map(function (item) {\n      return {\n        price: item.id,\n        quantity: item.quantity\n      };\n    })\n  });\n}\n\nexport default function useCart() {\n  _s();\n\n  var _useState = useState(defaultCart),\n      cart = _useState[0],\n      updateCart = _useState[1];\n\n  return {\n    cart: cart,\n    updateCart: updateCart,\n    subTotal: subTotal,\n    cartItems: cartItems,\n    checkout: checkout\n  };\n}\n\n_s(useCart, \"wKZ0WOakDEfFEhOSo9H2Efpji7g=\");","map":{"version":3,"sources":["/Users/acandael/Tutorials/space-jelly-store/hooks/use-cart.js"],"names":["useState","initiateCheckout","products","defaultCart","cartItems","Object","keys","cart","map","key","product","find","id","pricePerItem","price","subTotal","reduce","accumulator","quantity","totalItems","addToCart","updateCart","prev","checkout","lineItems","item","useCart"],"mappings":";;;;;;;;AAAA,SAAQA,QAAR,QAAuB,OAAvB;AACA,SAAQC,gBAAR,QAA+B,iBAA/B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AAEA,IAAMC,WAAW,GAAG;AAClBD,EAAAA,QAAQ,EAAE;AADQ,CAApB;AAIA,IAAME,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYC,IAAI,CAACL,QAAjB,EAA2BM,GAA3B,CAA+B,UAAAC,GAAG,EAAI;AACtD,MAAMC,OAAO,GAAGR,QAAQ,CAACS,IAAT,CAAc;AAAA,QAAEC,EAAF,QAAEA,EAAF;AAAA,WAAU,UAAGA,EAAH,gBAAeH,GAAf,CAAV;AAAA,GAAd,CAAhB;AACA,yCACKF,IAAI,CAACL,QAAL,CAAcO,GAAd,CADL;AAEEI,IAAAA,YAAY,EAAEH,OAAO,CAACI;AAFxB;AAID,CANiB,CAAlB;AAQA,IAAMC,QAAQ,GAAGX,SAAS,CAACY,MAAV,CAAiB,UAACC,WAAD,SAA2C;AAAA,MAA5BJ,YAA4B,SAA5BA,YAA4B;AAAA,MAAdK,QAAc,SAAdA,QAAc;AAC3E,SAAOD,WAAW,GAAIJ,YAAY,GAAGK,QAArC;AACD,CAFgB,EAEd,CAFc,CAAjB;AAIA,IAAMC,UAAU,GAAGf,SAAS,CAACY,MAAV,CAAiB,UAACC,WAAD,SAA6B;AAAA,MAAdC,QAAc,SAAdA,QAAc;AAC/D,SAAOD,WAAW,GAAGC,QAArB;AACD,CAFkB,EAEhB,CAFgB,CAAnB;;AAIA,SAASE,SAAT,GAA6B;AAAA,kFAAH,EAAG;AAAA,MAATR,EAAS,SAATA,EAAS;;AAC3BS,EAAAA,UAAU,CAAC,UAAAC,IAAI,EAAI;AACjB,QAAIf,IAAI,qBAAOe,IAAP,CAAR;;AAEA,QAAIf,IAAI,CAACL,QAAL,CAAcU,EAAd,CAAJ,EAAuB;AACrBL,MAAAA,IAAI,CAACL,QAAL,CAAcU,EAAd,EAAkBM,QAAlB,GAA6BX,IAAI,CAACL,QAAL,CAAcU,EAAd,EAAkBM,QAAlB,GAA6B,CAA1D;AACD,KAFD,MAEO;AACLX,MAAAA,IAAI,CAACL,QAAL,CAAcU,EAAd,IAAoB;AAClBA,QAAAA,EAAE,EAAFA,EADkB;AAElBM,QAAAA,QAAQ,EAAE;AAFQ,OAApB;AAID;;AACD,WAAOX,IAAP;AACD,GAZS,CAAV;AAaD;;AAED,SAASgB,QAAT,GAAmB;AACjBtB,EAAAA,gBAAgB,CAAC;AACfuB,IAAAA,SAAS,EAAEpB,SAAS,CAACI,GAAV,CAAc,UAACiB,IAAD,EAAU;AACjC,aAAO;AACLX,QAAAA,KAAK,EAAEW,IAAI,CAACb,EADP;AAELM,QAAAA,QAAQ,EAAEO,IAAI,CAACP;AAFV,OAAP;AAID,KALU;AADI,GAAD,CAAhB;AAQD;;AAGD,eAAe,SAASQ,OAAT,GAAkB;AAAA;;AAAA,kBACJ1B,QAAQ,CAACG,WAAD,CADJ;AAAA,MACxBI,IADwB;AAAA,MAClBc,UADkB;;AAE/B,SAAO;AACLd,IAAAA,IAAI,EAAJA,IADK;AAELc,IAAAA,UAAU,EAAVA,UAFK;AAGLN,IAAAA,QAAQ,EAARA,QAHK;AAILX,IAAAA,SAAS,EAATA,SAJK;AAKLmB,IAAAA,QAAQ,EAARA;AALK,GAAP;AAOD;;GATuBG,O","sourcesContent":["import {useState} from 'react';\nimport {initiateCheckout} from '../lib/payments'\nimport products from '../products.json';\n\nconst defaultCart = {\n  products: {}\n}\n\nconst cartItems = Object.keys(cart.products).map(key => {\n  const product = products.find(({id}) => `${id}` === `${key}`)\n  return {\n    ...cart.products[key],\n    pricePerItem: product.price\n  }\n})\n\nconst subTotal = cartItems.reduce((accumulator, {pricePerItem, quantity}) => {\n  return accumulator + (pricePerItem * quantity)\n}, 0)\n\nconst totalItems = cartItems.reduce((accumulator, {quantity}) => {\n  return accumulator + quantity\n}, 0)\n\nfunction addToCart({id} = {}){\n  updateCart(prev => {\n    let cart = {...prev}\n\n    if (cart.products[id]) {\n      cart.products[id].quantity = cart.products[id].quantity + 1\n    } else {\n      cart.products[id] = {\n        id,\n        quantity: 1\n      }\n    }\n    return cart;\n  })\n}\n\nfunction checkout(){\n  initiateCheckout({\n    lineItems: cartItems.map((item) => {\n      return {\n        price: item.id,\n        quantity: item.quantity\n      }\n    })\n  })\n}\n\n\nexport default function useCart(){\n  const [cart, updateCart] = useState(defaultCart)\n  return {\n    cart,\n    updateCart,\n    subTotal,\n    cartItems,\n    checkout\n  }\n}"]},"metadata":{},"sourceType":"module"}