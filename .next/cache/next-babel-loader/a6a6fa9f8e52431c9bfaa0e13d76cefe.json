{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from 'react';\nimport { initiateCheckout } from '../lib/payments';\nimport products from '../products.json';\nconst defaultCart = {\n  products: {}\n};\n\nfunction addToCart({\n  id\n} = {}) {\n  updateCart(prev => {\n    let cart = _objectSpread({}, prev);\n\n    if (cart.products[id]) {\n      cart.products[id].quantity = cart.products[id].quantity + 1;\n    } else {\n      cart.products[id] = {\n        id,\n        quantity: 1\n      };\n    }\n\n    return cart;\n  });\n}\n\nfunction checkout() {\n  initiateCheckout({\n    lineItems: cartItems.map(item => {\n      return {\n        price: item.id,\n        quantity: item.quantity\n      };\n    })\n  });\n}\n\nconst cartItems = Object.keys(cart.products).map(key => {\n  const product = products.find(({\n    id\n  }) => `${id}` === `${key}`);\n  return _objectSpread(_objectSpread({}, cart.products[key]), {}, {\n    pricePerItem: product.price\n  });\n});\nconst subTotal = cartItems.reduce((accumulator, {\n  pricePerItem,\n  quantity\n}) => {\n  return accumulator + pricePerItem * quantity;\n}, 0);\nconst totalItems = cartItems.reduce((accumulator, {\n  quantity\n}) => {\n  return accumulator + quantity;\n}, 0);\nexport default function useCart() {\n  const {\n    0: cart,\n    1: updateCart\n  } = useState(defaultCart);\n  return {\n    cart,\n    updateCart,\n    subTotal,\n    cartItems,\n    checkout\n  };\n}","map":{"version":3,"sources":["/Users/acandael/Tutorials/space-jelly-store/hooks/use-cart.js"],"names":["useState","initiateCheckout","products","defaultCart","addToCart","id","updateCart","prev","cart","quantity","checkout","lineItems","cartItems","map","item","price","Object","keys","key","product","find","pricePerItem","subTotal","reduce","accumulator","totalItems","useCart"],"mappings":";;;;;;AAAA,SAAQA,QAAR,QAAuB,OAAvB;AACA,SAAQC,gBAAR,QAA+B,iBAA/B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AAEA,MAAMC,WAAW,GAAG;AAClBD,EAAAA,QAAQ,EAAE;AADQ,CAApB;;AAIA,SAASE,SAAT,CAAmB;AAACC,EAAAA;AAAD,IAAO,EAA1B,EAA6B;AAC3BC,EAAAA,UAAU,CAACC,IAAI,IAAI;AACjB,QAAIC,IAAI,qBAAOD,IAAP,CAAR;;AAEA,QAAIC,IAAI,CAACN,QAAL,CAAcG,EAAd,CAAJ,EAAuB;AACrBG,MAAAA,IAAI,CAACN,QAAL,CAAcG,EAAd,EAAkBI,QAAlB,GAA6BD,IAAI,CAACN,QAAL,CAAcG,EAAd,EAAkBI,QAAlB,GAA6B,CAA1D;AACD,KAFD,MAEO;AACLD,MAAAA,IAAI,CAACN,QAAL,CAAcG,EAAd,IAAoB;AAClBA,QAAAA,EADkB;AAElBI,QAAAA,QAAQ,EAAE;AAFQ,OAApB;AAID;;AACD,WAAOD,IAAP;AACD,GAZS,CAAV;AAaD;;AAED,SAASE,QAAT,GAAmB;AACjBT,EAAAA,gBAAgB,CAAC;AACfU,IAAAA,SAAS,EAAEC,SAAS,CAACC,GAAV,CAAeC,IAAD,IAAU;AACjC,aAAO;AACLC,QAAAA,KAAK,EAAED,IAAI,CAACT,EADP;AAELI,QAAAA,QAAQ,EAAEK,IAAI,CAACL;AAFV,OAAP;AAID,KALU;AADI,GAAD,CAAhB;AAQD;;AAED,MAAMG,SAAS,GAAGI,MAAM,CAACC,IAAP,CAAYT,IAAI,CAACN,QAAjB,EAA2BW,GAA3B,CAA+BK,GAAG,IAAI;AACtD,QAAMC,OAAO,GAAGjB,QAAQ,CAACkB,IAAT,CAAc,CAAC;AAACf,IAAAA;AAAD,GAAD,KAAW,GAAEA,EAAG,EAAN,KAAa,GAAEa,GAAI,EAA3C,CAAhB;AACA,yCACKV,IAAI,CAACN,QAAL,CAAcgB,GAAd,CADL;AAEEG,IAAAA,YAAY,EAAEF,OAAO,CAACJ;AAFxB;AAID,CANiB,CAAlB;AAQA,MAAMO,QAAQ,GAAGV,SAAS,CAACW,MAAV,CAAiB,CAACC,WAAD,EAAc;AAACH,EAAAA,YAAD;AAAeZ,EAAAA;AAAf,CAAd,KAA2C;AAC3E,SAAOe,WAAW,GAAIH,YAAY,GAAGZ,QAArC;AACD,CAFgB,EAEd,CAFc,CAAjB;AAIA,MAAMgB,UAAU,GAAGb,SAAS,CAACW,MAAV,CAAiB,CAACC,WAAD,EAAc;AAACf,EAAAA;AAAD,CAAd,KAA6B;AAC/D,SAAOe,WAAW,GAAGf,QAArB;AACD,CAFkB,EAEhB,CAFgB,CAAnB;AAOA,eAAe,SAASiB,OAAT,GAAkB;AAC/B,QAAM;AAAA,OAAClB,IAAD;AAAA,OAAOF;AAAP,MAAqBN,QAAQ,CAACG,WAAD,CAAnC;AACA,SAAO;AACLK,IAAAA,IADK;AAELF,IAAAA,UAFK;AAGLgB,IAAAA,QAHK;AAILV,IAAAA,SAJK;AAKLF,IAAAA;AALK,GAAP;AAOD","sourcesContent":["import {useState} from 'react';\nimport {initiateCheckout} from '../lib/payments'\nimport products from '../products.json';\n\nconst defaultCart = {\n  products: {}\n}\n\nfunction addToCart({id} = {}){\n  updateCart(prev => {\n    let cart = {...prev}\n\n    if (cart.products[id]) {\n      cart.products[id].quantity = cart.products[id].quantity + 1\n    } else {\n      cart.products[id] = {\n        id,\n        quantity: 1\n      }\n    }\n    return cart;\n  })\n}\n\nfunction checkout(){\n  initiateCheckout({\n    lineItems: cartItems.map((item) => {\n      return {\n        price: item.id,\n        quantity: item.quantity\n      }\n    })\n  })\n}\n\nconst cartItems = Object.keys(cart.products).map(key => {\n  const product = products.find(({id}) => `${id}` === `${key}`)\n  return {\n    ...cart.products[key],\n    pricePerItem: product.price\n  }\n})\n\nconst subTotal = cartItems.reduce((accumulator, {pricePerItem, quantity}) => {\n  return accumulator + (pricePerItem * quantity)\n}, 0)\n\nconst totalItems = cartItems.reduce((accumulator, {quantity}) => {\n  return accumulator + quantity\n}, 0)\n\n\n\n\nexport default function useCart(){\n  const [cart, updateCart] = useState(defaultCart)\n  return {\n    cart,\n    updateCart,\n    subTotal,\n    cartItems,\n    checkout\n  }\n}"]},"metadata":{},"sourceType":"module"}